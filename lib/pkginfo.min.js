/*
 pkginfo.js: Top-level include for the pkginfo module
 (C) 2011, Charlie Robbins
*/
module.exports=function(g){function b(c,a){var e=[].slice.call(arguments,2).filter(function(a){return"string"===typeof a});Array.isArray(a)?a={include:a}:"string"===typeof a&&(a={include:[a]});a=a||{};a.include=a.include||[];0<e.length&&(a.include=a.include.concat(e));var d=b.read(c,a.dir)["package"];Object.keys(d).forEach(function(b){if(!(0<a.include.length)||~a.include.indexOf(b))c.exports[b]||(c.exports[b]=d[b])});return b}var f=require("fs"),d=require("path");b.find=function(c,a){a||(a=d.dirname(c.filename));
if(~f.readdirSync(a).indexOf("package.json"))return d.join(a,"package.json");if("/"===a)throw Error("Could not find package.json up from: "+a);if(!a||"."===a)throw Error("Cannot find package.json from unspecified directory");return b.find(c,d.dirname(a))};b.read=function(c,a){a=b.find(c,a);var d=f.readFileSync(a).toString();return{dir:a,"package":JSON.parse(d)}};b(g,{dir:__dirname,include:["version"],target:b});return b}(module);
